/* ************************************************************************** */
/*                                                                            */
/*                                                        :::      ::::::::   */
/*   lis.c                                              :+:      :+:    :+:   */
/*                                                    +:+ +:+         +:+     */
/*   By: aalami <aalami@student.1337.ma>            +#+  +:+       +#+        */
/*                                                +#+#+#+#+#+   +#+           */
/*   Created: 2023/02/23 19:02:25 by aalami            #+#    #+#             */
/*   Updated: 2023/02/24 02:45:32 by aalami           ###   ########.fr       */
/*                                                                            */
/* ************************************************************************** */

#include <stdio.h>
#include <stdlib.h>

int	*find_lenght(int *arr, int n)
{
	int 	*lis;
	// int	len;
	int	size;
	int	i; // check previews cells of the current cell
	int	j; // check array's cells

	// len = 1;
	size = 0;
	lis = malloc(sizeof(int) * n);
	j = 1;
	while (size < n)
	{
		lis[size] = 1;
		size ++;
	}
	while (j < n)
	{
		i = 0;
		while (i < j)
		{
			if (arr[i] < arr[j] && lis[j] <= lis[i])
			{
				lis[j] = lis[i] + 1;
				// len = lis[j];
			}
			i++;
		}
		j++;
	}
	return (lis);
}
int	get_lis_max(int *lis, int n)
{
	int	i;
	int	max;

	max = 1;
	i = 0;
	while (i < n)
	{
		if (lis[i] > max)
			max = lis[i];
		i++;
	}
	return (max);
}
int	get_lis_max_index(int *lis, int n, int num)
{
	int	i;

	i = n;
	while (i >= 0)
	{
		if (lis[i] == num)
			break;
		i--;
	}
	return (i);
}

int	get_lis_index(int *lis, int n, int num, int max_index)
{
	int	i;

	i = max_index;
	while (i >= 0)
	{
		if (lis[i] == num)
			break;
		i--;
	}
	return (i);
}
int	*get_lis(int *arr, int n)
{
	int	*lis;
	int	*sub;
	int	max_index;
	int	index;
	int	lis_size;
	int	i;

	lis = find_lenght(arr, n);
	lis_size = get_lis_max(lis, n);
	sub = (int *)malloc(sizeof(int) * lis_size);
	max_index =  get_lis_max_index(lis, n, lis_size);
	while (lis_size >= 1)
	{
		index =  get_lis_index(lis, n, lis_size, max_index);
		// printf ("%d\n", index);
		i = lis_size - 1;
		sub[i] = arr[index];
		lis_size --;
	}
	return (sub);
}

int	main()
{
	int arr[500] = {570, 72, 891, 209, 385, 520, 146, 905, -79, -24, 477, 7, 219, -66, 679, 78, 973, 140, 737, 783, 248, 8, 14, 849, 682, 100, 976, -76, 820, 395, 750, 988, 397, 110, 816, 386, 851, 452, -67, 190, 85, 848, 503, -96, 701, 80, 864, 984, 962, 416, 408, 492, 544, 262, 486, 445, 769, 246, 0, 180, 580, -100, 255, 287, -73, 267, 197, 671, 148, 34, 138, 524, 251, -40, 467, 272, 313, 576, 942, -57, 63, 294, 867, 353, 216, 692, 101, 822, 512, 24, 184, -86, 337, 934, 698, 69, 380, -29, 775, 396, 331, 20, -60, 629, 507, 534, 163, 684, 17, 753, 290, 189, 704, 116, 518, 157, 587, 940, 898, 4, 959, 103, 149, 329, -23, 221, 1000, 400, 578, 428, 79, 152, -31, 286, 71, 910, 550, 920, 678, 391, 923, 25, 616, 599, 357, 535, 661, 130, 217, 490, 454, 932, 281, 514, 405, 929, 257, 630, 273, 308, 772, 510, 421, 614, 966, 886, 908, 155, -5, 845, 575, 882, 252, 59, 548, 605, 537, 315, 556, 45, 469, 350, 591, 424, 655, 683, -16, 77, 133, 387, 336, 870, -95, 830, 680, 470, 302, 488, 866, 480, 187, 1, 15, 839, 491, 440, 74, 705, 690, 345, 521, 949, 328, 798, 899, 999, 309, 449, 880, 956, 476, 229, 448, 945, 538, 825, 417, 637, 907, 364, 964, 84, 572, 334, 955, 236, 904, 919, 628, 828, 802, 220, 105, 393, 913, -21, -83, 413, 338, 773, 665, 147, 618, 330, 829, 604, 989, 370, 132, 993, 722, 725, 735, 714, 695, 30, 108, 713, 804, 52, 566, 903, 205, 270, 97, 965, 171, 87, 723, 99, 215, 359, 782, 161, -4, 533, 875, 917, 766, 603, 764, 436, 170, 447, 143, 368, 202, 815, 777, 746, 243, 57, 263, -87, -3, 38, 291, 82, 644, 506, 347, 837, 729, -94, 634, 860, 742, 192, 297, 901, 827, 431, 293, 881, 115, 596, 81, 453, 702, 897, 249, 289, 812, 647, -27, -81, 831, 501, 712, 42, 402, 129, 253, 509, 715, 560, 306, 300, 517, 733, 633, 242, 519, 709, 779, 689, 403, 275, 817, 840, 808, 694, 266, 234, 91, 579, -19, 672, 47, 921, -2, 748, 475, 872, 268, 292, 675, -15, 372, 401, 119, 794, 981, 778, 301, -80, 883, 835, 786, 254, 320, 361, 631, 450, 167, 703, 188, 719, 884, -54, -20, -37, 27, 627, 382, 68, -78, -70, 64, 142, 479, 516, 376, 610, 589, -98, 232, 598, 260, 206, 645, 109, 677, 39, 807, 613, 674, 104, 28, 906, 325, 117, 967, 691, 295, 623, 265, 349, 342, 473, 383, 797, 224, 502, 62, 563, 852, -18, 422, 173, 574, 902, 410, 585, 728, 351, 175, 749, 612, 969, 312, 763, 562, 508, 131, 40, 12, 437, 912, 856, 696, 924, -58, 341, 990, -72, 865, 700, 195, 759, 811, 223, 997, 676, 869, 279, 429, 26, 70, 528, 324, 948, 952, 65, 549, 504, 399, 868, 237, 362};
	int i;
	int *lis = find_lenght(arr, 500);
	int max = get_lis_max (lis, 500);
		printf("%d \n",max);
	int *sub = get_lis(arr, 500);
	i = 0;
	while (i < max)
	{
		printf("%d ",sub[i]);
		i++;
	}
		printf("\n");
	
}
